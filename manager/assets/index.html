<!DOCTYPE html>
<html lang="en">

<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <meta http-equiv="X-UA-Compatible" content="ie=edge">
  <title>MPC service</title>
  <link rel="stylesheet" href="./style/index.css">
</head>

<!-- Code for wasm -->
<script src="wasm_exec.js"></script>
<script type="text/javascript" src="load_wasm.js"></script>

<!-- Load custom js functions -->
<script type="text/javascript" src="mpc_utils.js"></script>
<script type="text/javascript" src="dataset_utils.js"></script>

<!--todo: null lists, busy signal, msgs on webpage-->

<body>
  <div class="page-wrap">
    <div class="header-outer-wrap">
      <div class="header-wrap">
        <h1>基于同态密码的多方数据安全计算及隐私保护工具</h1>
      </div>
    </div>
    <div class="caption-text-wrap">
      <h2> 已连接的 MPC 节点 </h2>

      <table class="datasets">
        <thead>
          <tr>
            <th></th>
            <th>节点</th>
            <th>地址</th>
            <th>描述</th>
          </tr>
        </thead>
        <tbody id="nodes">
        </tbody>
      </table>
      <script> load_nodes_table() </script>


    </div>
    <div class="node-outer-wrap">

      <div class="node-wrap">
        <h2> 数据集 </h2>

        <h4 class="available-detaset"> 可用的数据集 </h4>
        <table class="datasets">
          <thead>
            <tr>
              <th> </th>
              <th>数据集</th>
              <th>数据集大小</th>
              <th>与谁分享</th>
            </tr>
          </thead>
          <tbody id="datasets">
          </tbody>
        </table>

        <script> load_datasets_table() </script>

        <div class="add-detaset-wrap">
          <h4> 添加数据集 </h4>
          <p class="dataset-description">
            To add a dataset join as a dataset server or provide a downloadable link. For the latter, select 3 MPC
            nodes
            that
            you want to share your data with, and then select a CSV file to encrypt:

          </p>
          <div class="file-select-wrap">
            <input type="file" id="fileToLoad">
            <div class="under-line"></div>


            <div class="enc-btn-wrap">
              <button class="enc-button" onclick="loadAndSplit()">加密选择的文件</button>

            </div>
          </div>

          <div class="upload-wrap">
            <p>Upload the dataset to your cloud storage and provide a link </p>

            <div class="detaset-wrap">
              <p class="dataset-name"> Dataset name:</p> <input type="text" id="dataset_name" name="dataset_name">
            </div>
            <div class="detaset-wrap">
              <p class="dataset-name">Dataset link:</p> <input type="text" id="dataset_link" name="dataset_link">
            </div>
            <p>
            </p>
          </div>
        </div>
      </div>
    </div>

    <div class="request-mpc-wrap">
      <h2> 发起 MPC 计算 </h2>
      <p>
        To initiate a computation select three MPC nodes, (possibly multiple) datasets, a desired function, and
        click
        the following button.
      </p>

      <tbody id="nodes">
        <tr>
     
          <td>
            <div class="nodes-select-outer-wrap">
              <div class="node-select-wrap">
                <input type="checkbox" class="function" id="avg" name="contact" value="avg">
                <label for="avg">Average</label>
              </div>
            </div>
          </td>
        </tr>
        <tr>
      
          <td>
            <div class="nodes-select-outer-wrap">
              <div class="node-select-wrap">
                <input type="checkbox" class="function" id="min" name="contact" value="min">
                <label for="min">Minimum</label>
              </div>
            </div>
          </td>
        </tr>
        <tr>
  
          <td>
            <div class="nodes-select-outer-wrap">
              <div class="node-select-wrap">
                <input type="checkbox" class="function" id="max" name="contact" value="max">
                <label for="max">Maximum</label>
              </div>
            </div>
          </td>
        </tr>
        <tr>
      
          <td>
            <div class="nodes-select-outer-wrap">
              <div class="node-select-wrap">
                <input type="checkbox" class="function" id="absolute" name="contact" value="absolute">
                <label for="absolute">AbsoluteDeviation</label>
              </div>
            </div>
          </td>
        </tr>
        <tr>
    
          <td>
            <div class="nodes-select-outer-wrap">
              <div class="node-select-wrap">
                <input type="checkbox" class="function" id="quartile" name="contact" value="quartile">
                <label for="quartile">Quartile</label>
              </div>
            </div>
          </td>
        </tr>
        <tr>
         
          <td>
            <div class="nodes-select-outer-wrap">
              <div class="node-select-wrap">
                <input type="checkbox" class="function" id="medium" name="contact" value="medium">
                <label for="medium">Medium</label>
              </div>
            </div>
          </td>
        </tr>
        <tr>
        
          <td>
            <div class="nodes-select-outer-wrap">
              <div class="node-select-wrap">
                <input type="checkbox" class="function" id="upperquartile" name="contact" value="upperquartile">
                <label for="upperquartile">UpperQuartile</label>
              </div>
            </div>
          </td>
        </tr>
        <tr>
     
          <td>
            <div class="nodes-select-outer-wrap">
              <div class="node-select-wrap">
                <input type="checkbox" class="function" id="variance" name="contact" value="variance">
                <label for="variance">Variance</label>
              </div>
            </div>
          </td>
        </tr>
        <tr>
         
          <td>
            <div class="nodes-select-outer-wrap">
              <div class="node-select-wrap">
                <input type="checkbox" class="function" id="standard" name="contact" value="standard">
                <label for="standard">StandardDeviation</label>
              </div>
            </div>
          </td>
        </tr>
        <tr>
      
          <td>
            <div class="nodes-select-outer-wrap">
              <div class="node-select-wrap">
                <input type="checkbox" class="function" id="sknewness" name="contact" value="sknewness">
                <label for="sknewness">Sknewness</label>
              </div>
            </div>
          </td>
        </tr>
        <tr>
      
          <td>
            <div class="nodes-select-outer-wrap">
              <div class="node-select-wrap">
                <input type="checkbox" class="function" id="kurtosis" name="contact" value="kurtosis">
                <label for="kurtosis">Kurtosis</label>
              </div>
            </div>
          </td>
        </tr>
      </tbody>
      </table>
      </div>
  
  <div style="  font-size: 20px;">
      <div class="nodes-select-outer-wrap" style="margin-left: 300px; ">
  
  
  
        <button class="request-btn" onClick="mpc_computation2();" id="addButton">
          发起计算
        </button>
        <div class="error-msg" id="errorMsg" style="display:none"></div>
  
        <p>
          <progress id="progressBar" max="100" value="0"></progress>
        </p>
      </div>
    </div>
    <style >
      .blue-button {
    background-color: blue;
    color: white;
    border-radius: 10px; /* 设置圆角半径 */
    padding: 10px 20px; /* 设置内边距 */
  }

  .request-btn {
    background-color: blue;
    color: white;
    border-radius: 10px;
    padding: 10px 20px;
    margin-top: 40px;

  }

  .sidenav {
    height: 100%;
    width: 300px; /* 增加宽度 */
    position: fixed;
    top: 0;
    left: 0;
    background-color: #f1f1f1;
    overflow-x: hidden;
    padding-top: 20px;
  }
  
  .sidenav button {
    display: block;
    font-size: 16px;
    border: none;
    background-color: inherit;
    color: black;
    padding: 12px 16px;
    margin: 10px auto; /* 设置左右 margin 为 auto 实现居中 */
    text-decoration: none;
    text-align: center;
    cursor: pointer;
    width: 50%; /* 让按钮宽度为容器宽度的一半 */
  }
  
  /* 当按钮被 hover 时改变背景色 */
  .sidenav button:hover {
    background-color: blue; /* 改变背景色为蓝色 */
    color: white; /* 同时改变字体颜色为白色以突出显示 */
  }
  .sidenav #new-computation {
  background-color: blue;
  color: white;
}

  </style>
      <!-- <div class="nodes-select-outer-wrap">
        <div class="node-select-wrap">
          <input type="checkbox" class="function" id="avg" name="contact" value="avg">
          <label for="avg">Average</label>
        </div>

        <div class="node-select-wrap">

          <input type="checkbox" class="function" id="stats" name="contact" value="stats">
          <label for="stats">Statistics</label>

        </div>

        <div class="node-select-wrap">

          <input type="checkbox" class="function" id="absolutedeviation" name="contact" value="absolutedeviation">
          <label for="absolutedeviation">absolutedeviation</label>

        </div>

        <div class="node-select-wrap">

          <input type="checkbox" class="function" id="kurtosis" name="contact" value="kurtosis">
          <label for="kurtosis">kurtosis</label>

        </div>

        <div class="node-select-wrap">

          <input type="checkbox" class="function" id="max" name="contact" value="max">
          <label for="max">max</label>

        </div>

        <div class="node-select-wrap">

          <input type="checkbox" class="function" id="medium" name="contact" value="medium">
          <label for="medium">medium</label>

        </div>

        <div class="node-select-wrap">

          <input type="checkbox" class="function" id="min" name="contact" value="min">
          <label for="min">min</label>

        </div>

        <div class="node-select-wrap">

          <input type="checkbox" class="function" id="quartile" name="contact" value="quartile">
          <label for="quartile">quartile</label>

        </div>

        <div class="node-select-wrap">

          <input type="checkbox" class="function" id="sknewness" name="contact" value="sknewness">
          <label for="sknewness">sknewness</label>

        </div>

        <div class="node-select-wrap">

          <input type="checkbox" class="function" id="standarddeviation" name="contact" value="standarddeviation">
          <label for="standarddeviation">standarddeviation</label>

        </div>

        <div class="node-select-wrap">

          <input type="checkbox" class="function" id="upperquartile" name="contact" value="upperquartile">
          <label for="upperquartile">upperquartile</label>

        </div>

        <div class="node-select-wrap">

          <input type="checkbox" class="function" id="variance" name="contact" value="variance">
          <label for="variance">variance</label>

        </div>
        
        <div class="node-select-wrap">

          <input type="checkbox" class="function" id="k-means" name="contact" value="k-means">
          <label for="k-means">k-means</label>

          (Number of clusters: <input class="num_clusters" type="text" id="num_clusters" name="num_clusters">)
        </div>

        <button class="request-btn" onClick="mpc_computation2();" id="addButton">
          Request the MPC computation.
        </button> -->
        <div class="error-msg" id="errorMsg" style="display:none"></div>

        <p>
          <progress id="progressBar" max="100" value="0"></progress>
        </p>
      </div>
    </div>
  </div>
</body>

</html>